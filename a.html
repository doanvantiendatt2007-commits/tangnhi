<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Tang Nhi üéÑ</title>

<style>
html, body {
    margin: 0;
    overflow: hidden;
    background: radial-gradient(circle at top, #0a0a2a, #000);
    font-family: "Segoe UI", sans-serif;
}


canvas {
    position: absolute;
    inset: 0;
    z-index: 1;
    pointer-events: none;
}


#title {
    position: absolute;
    top: 20px;
    width: 100%;
    text-align: center;
    font-size: 42px;
    color: gold;
    text-shadow: 0 0 25px gold;
    opacity: 0;
    transition: opacity 1.5s;
    z-index: 4;
}

#typewriter {
    position: absolute;
    bottom: 40px;
    width: 100%;
    text-align: center;
    font-size: 22px;
    color: white;
    text-shadow: 0 0 10px cyan;
    z-index: 4;
}


#carousel {
    position: absolute;
    top: 52%;
    left: 50%;
    width: 300px;
    height: 380px;
    transform: translate(-50%, -50%);
    perspective: 1000px;
    z-index: 3;
    pointer-events: none;
}

.slide {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    transform: translateX(-240px) rotateY(45deg);
    transition: all 1.2s ease;
    border-radius: 16px;
    object-fit: cover;
    box-shadow:
        0 0 25px rgba(255,215,0,0.6),
        0 0 60px rgba(255,215,0,0.3);
}

.slide.trail {
    filter: blur(6px);
    opacity: 0.5;
}


.ornament {
    position: absolute;
    width: 28px;
    height: 28px;
    border-radius: 6px;
    object-fit: cover;
    box-shadow: 0 0 12px rgba(255,255,255,0.7);
    z-index: 3;
    pointer-events: none;
}
</style>
</head>

<body>

<h1 id="title">üéÑ Ch√∫c Nhi Gi√°ng Sinh Vui V·∫ª üéÑ</h1>
<div id="typewriter"></div>
<div id="carousel"></div>
<canvas id="canvas"></canvas>


<audio id="bgm1" src="nhac1.mp3" loop></audio>
<audio id="bgm2" src="nhac2.mp3" loop></audio>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize() {
    canvas.width = innerWidth;
    canvas.height = innerHeight;
}
resize();
window.onresize = resize;

const cx = () => canvas.width / 2;
const topY = canvas.height * 0.18;
const treeH = canvas.height * 0.6;

let particles = [];
let ornaments = [];
let effects = [];
let exploded = false;
let showStar = true;

const title = document.getElementById("title");
const typewriter = document.getElementById("typewriter");


const bgm1 = document.getElementById("bgm1");
const bgm2 = document.getElementById("bgm2");

window.addEventListener("load", () => {
    bgm1.volume = 0.6;
    bgm2.volume = 0.8;
    bgm1.play().catch(()=>{});
});


let starPulse = 0;
function drawStar() {
    if (!showStar) return;
    starPulse += 0.05;
    const r = 18 + Math.sin(starPulse) * 3;
    ctx.save();
    ctx.translate(cx(), topY - 35);
    ctx.beginPath();
    for (let i = 0; i < 5; i++) {
        ctx.lineTo(0, r);
        ctx.rotate(Math.PI / 5);
        ctx.lineTo(0, -r);
        ctx.rotate(Math.PI / 5);
    }
    ctx.fillStyle = "gold";
    ctx.shadowBlur = 25;
    ctx.shadowColor = "gold";
    ctx.fill();
    ctx.restore();
}


class Particle {
    constructor(y = Math.random()) {
        this.y = y;
        this.a = Math.random() * Math.PI * 2;
        this.s = Math.random() * 0.01 + 0.003;
        this.r = Math.random() * 2 + 1.2;
        this.c = `hsl(${Math.random() * 360},100%,70%)`;
        this.vx = (Math.random() - 0.5) * 8;
        this.vy = (Math.random() - 0.5) * 8;
    }
    update() {
        const yy = topY + this.y * treeH;
        const rr = this.y * treeH * 0.45;
        if (!exploded) {
            this.a += this.s;
            this.x = cx() + Math.cos(this.a) * rr;
            this.y2 = yy;
        } else {
            this.x += this.vx;
            this.y2 += this.vy;
            this.vy += 0.05;
        }
    }
    draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y2, this.r, 0, Math.PI * 2);
        ctx.fillStyle = this.c;
        ctx.fill();
    }
}
for (let i = 0; i < 900; i++) particles.push(new Particle());


const images = ["img1.jpg","img2.jpg","img3.jpg","img4.jpg","img5.jpg"];
images.forEach(src => {
    const img = document.createElement("img");
    img.src = src;
    img.className = "ornament";
    document.body.appendChild(img);
    ornaments.push({ el: img, a: Math.random() * 6, y: Math.random() * 0.85 + 0.1 });
});

function updateOrnaments() {
    ornaments.forEach(o => {
        const y = topY + o.y * treeH;
        const r = o.y * treeH * 0.45;
        o.a += 0.01;
        o.el.style.left = cx() + Math.cos(o.a) * r - 14 + "px";
        o.el.style.top = y - 14 + "px";
        if (exploded) o.el.style.opacity = 0;
    });
}


class Rocket {
    constructor(x) {
        this.x = x;
        this.y = canvas.height + 10;
        this.vy = -(Math.random() * 5 + 9);
        this.target = canvas.height * 0.3 + Math.random() * 80;
        this.done = false;
    }
    update() {
        this.y += this.vy;
        this.vy += 0.05;
        if (this.y < this.target && !this.done) {
            this.done = true;
            effects.push(new Explosion(this.x, this.y));
        }
    }
    draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, 2, 0, Math.PI*2);
        ctx.fillStyle = "white";
        ctx.fill();
    }
}

class Explosion {
    constructor(x, y) {
        this.p = [];
        for (let i = 0; i < 55; i++) {
            const a = Math.random() * Math.PI * 2;
            const s = Math.random() * 4 + 2;
            this.p.push({
                x, y,
                vx: Math.cos(a) * s,
                vy: Math.sin(a) * s,
                l: 70,
                c: `hsl(${Math.random() * 360},100%,60%)`
            });
        }
    }
    update() {
        this.p.forEach(p => {
            p.x += p.vx;
            p.y += p.vy;
            p.vy += 0.04;
            p.l--;
        });
        this.p = this.p.filter(p => p.l > 0);
    }
    draw() {
        this.p.forEach(p => {
            ctx.beginPath();
            ctx.arc(p.x, p.y, 2, 0, Math.PI*2);
            ctx.fillStyle = p.c;
            ctx.fill();
        });
    }
}


function loop() {
    ctx.fillStyle = "rgba(0,0,0,0.25)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    particles.forEach(p => { p.update(); p.draw(); });
    updateOrnaments();
    drawStar();

    effects.forEach(e => {
        e.update && e.update();
        e.draw();
    });
    effects = effects.filter(e => !e.p || e.p.length);

    requestAnimationFrame(loop);
}
loop();


document.body.addEventListener("click", () => {
    if (exploded) return;
    exploded = true;
    showStar = false;

    bgm1.pause();
    bgm1.currentTime = 0;
    bgm2.play();

    title.style.opacity = 1;
    startCarousel();
    typeText();

    setInterval(() => {
        effects.push(new Rocket(60));
        effects.push(new Rocket(canvas.width - 60));
    }, 1800);
});


const carousel = document.getElementById("carousel");
images.forEach(src => {
    const img = document.createElement("img");
    img.src = src;
    img.className = "slide";
    carousel.appendChild(img);
});
const slides = document.querySelectorAll(".slide");
let cur = 0;

function showSlide(i) {
    slides.forEach(s => {
        s.style.opacity = 0;
        s.style.transform = "translateX(-240px) rotateY(45deg)";
        s.classList.remove("trail");
    });
    slides[i].style.opacity = 1;
    slides[i].style.transform = "translateX(0)";
    slides[i].classList.add("trail");
    setTimeout(() => slides[i].classList.remove("trail"), 500);
}

function startCarousel() {
    showSlide(cur);
    setInterval(() => {
        slides[cur].style.opacity = 0;
        cur = (cur + 1) % slides.length;
        setTimeout(() => showSlide(cur), 400);
    }, 3000);
}


const message =
"Ch√∫c Nhi ng√†y c√†ng xinh ƒë·∫πp, kh·ªèe m·∫°nh, t∆∞∆°i t·∫Øn, h·∫°nh ph√∫c v√† lu√¥n ƒë∆∞·ª£c y√™u th∆∞∆°ng üíñ";
let idx = 0;

function typeText() {
    if (idx < message.length) {
        typewriter.innerHTML += message[idx++];
        setTimeout(typeText, 60);
    }
}
</script>

</body>
</html>
